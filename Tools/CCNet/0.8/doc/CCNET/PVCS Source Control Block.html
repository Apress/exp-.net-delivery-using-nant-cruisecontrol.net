<html>
    <head>
        <title>CruiseControl.NET : PVCS Source Control Block</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            CruiseControl.NET : PVCS Source Control Block
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Oct 13, 2004 by <font color="#0050B2">mroberts</font>.
				    </div>

				    
Here are some example files for working with PVCS. <p class="paragraph"><h3 class="heading3"><a name="PVCSSourceControlBlock-PVCSConfigurationExamples"> PVCS Configuration Examples</a></h3></p>For pvcs you must specify the executable, project and subproject. You may also specify arguments and instructions. <br/>

<div class="code"><div class="codeContent">
<pre><span class="xml&#45;tag">&lt;sourcecontrol type=<span class="xml&#45;quote">&quot;pvcs&quot;</span>&gt;</span>&#10;   <span class="xml&#45;tag">&lt;executable&gt;</span>c:&#92;pvcs&#92;pvcs.exe<span class="xml&#45;tag">&lt;/executable&gt;</span>&#10;   <span class="xml&#45;tag">&lt;project&gt;</span>ccnet<span class="xml&#45;tag">&lt;/project&gt;</span>&#10;   <span class="xml&#45;tag">&lt;subproject&gt;</span>ccnet1.0<span class="xml&#45;tag">&lt;/subproject&gt;</span>&#10;   <span class="xml&#45;tag">&lt;arguments&gt;</span>buildguy<span class="xml&#45;tag">&lt;/arguments&gt;</span>&#10;   <span class="xml&#45;tag">&lt;instructions&gt;</span>42<span class="xml&#45;tag">&lt;/instructions&gt;</span>&#10;<span class="xml&#45;tag">&lt;/sourcecontrol&gt;</span></pre>
</div></div><p class="paragraph"><h3 class="heading3"><a name="PVCSSourceControlBlock-ccnet.config"> ccnet.config</a></h3>
<div class="code"><div class="codeContent">
<pre><span class="xml&#45;tag">&lt;cruisecontrol&gt;</span>&#10;   <span class="xml&#45;tag">&lt;project name=<span class="xml&#45;quote">&quot;Project1&quot;</span>&gt;</span>&#10;     <span class="xml&#45;tag">&lt;schedule type=<span class="xml&#45;quote">&quot;schedule&quot;</span> timeout=<span class="xml&#45;quote">&quot;10000&quot;</span>/&gt;</span>&#10;     <span class="xml&#45;tag">&lt;modificationDelay&gt;</span>10000<span class="xml&#45;tag">&lt;/modificationDelay&gt;</span>&#10;         <span class="xml&#45;tag">&lt;sourcecontrol type=<span class="xml&#45;quote">&quot;pvcs&quot;</span>&gt;</span>&#10;             <span class="xml&#45;tag">&lt;executable&gt;</span>C:&#92;Program Files&#92;PVCS&#92;vm&#92;win32&#92;bin&#92;pcli.exe<span class="xml&#45;tag">&lt;/executable&gt;</span>             &#10;&#10;             <span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; you can read project path from PVCS GUI &#45;&#45;&gt;</span></span>       &#10;             <span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; its the absolute dir in brackets after the project data base name &#45;&#45;&gt;</span></span>       &#10;             <span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; i.e. &lt;project&gt;</span>&#45;pr&#039;C:&#92;somedir&#92;pvcsrepos&#039;<span class="xml&#45;tag">&lt;/project&gt;</span> &#45;&#45;&gt;</span>             &#10;             <span class="xml&#45;tag">&lt;project&gt;</span>&#45;pr&#039;type path to PVCS repository&#039;<span class="xml&#45;tag">&lt;/project&gt;</span>&#10;&#10;             <span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; type the relative path (proceeded with a slash) to the subproject &#45;&#45;&gt;</span></span>&#10;             <span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; i.e. &lt;subproject&gt;</span>/project1/Payroll<span class="xml&#45;tag">&lt;/subproject&gt;</span> &#45;&#45;&gt;</span>&#10;             <span class="xml&#45;tag">&lt;subproject&gt;</span>/someProject<span class="xml&#45;tag">&lt;/subproject&gt;</span>&#10;         <span class="xml&#45;tag">&lt;/sourcecontrol&gt;</span>&#10;         <span class="xml&#45;tag">&lt;build type=<span class="xml&#45;quote">&quot;nant&quot;</span>&gt;</span>&#10;             <span class="xml&#45;tag">&lt;executable&gt;</span>C:&#92;apps&#92;nant&#45;0.8.3.50100&#92;bin&#92;nant.exe<span class="xml&#45;tag">&lt;/executable&gt;</span>&#10;             <span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; this is the path to the builder directory where we installed cc.net &#45;&#45;&gt;</span></span>&#10;             <span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; copy the cruise.build file into this directory &#45;&#45;&gt;</span></span>&#10;             <span class="xml&#45;tag">&lt;baseDirectory&gt;</span>C:&#92;someDir&#92;builder<span class="xml&#45;tag">&lt;/baseDirectory&gt;</span>&#10;             <span class="xml&#45;tag">&lt;buildArgs&gt;</span>&#45;logger:NAnt.Core.XmlLogger &#45;D:pvcs.executable=<span class="xml&#45;quote">&quot;C:&#92;Program Files&#92;PVCS&#92;vm&#92;win32&#92;bin&#92;pcli.exe&quot;</span><span class="xml&#45;tag">&lt;/buildArgs&gt;</span>&#10;             <span class="xml&#45;tag">&lt;buildFile&gt;</span>cruise.build<span class="xml&#45;tag">&lt;/buildFile&gt;</span>&#10;             <span class="xml&#45;tag">&lt;targetList&gt;</span>&#10;                 <span class="xml&#45;tag">&lt;target&gt;</span>run<span class="xml&#45;tag">&lt;/target&gt;</span>&#10;             <span class="xml&#45;tag">&lt;/targetList&gt;</span>&#10;             <span class="xml&#45;tag">&lt;buildTimeout&gt;</span>100000<span class="xml&#45;tag">&lt;/buildTimeout&gt;</span>     &#10;         <span class="xml&#45;tag">&lt;/build&gt;</span>&#10;     <span class="xml&#45;tag">&lt;publishers&gt;</span>&#10;     <span class="xml&#45;tag">&lt;email from=<span class="xml&#45;quote">&quot;buildmaster&#64;mycompany.com&quot;</span> mailhost=<span class="xml&#45;quote">&quot;host.net&quot;</span> includeDetails=<span class="xml&#45;quote">&quot;TRUE&quot;</span>&gt;</span>&#10;         <span class="xml&#45;tag">&lt;projectUrl&gt;</span>&#104;ttp://localhost/ccnet<span class="xml&#45;tag">&lt;/projectUrl&gt;</span>&#10;        <span class="xml&#45;tag">&lt;users&gt;</span>&#10;           <span class="xml&#45;tag">&lt;user name=<span class="xml&#45;quote">&quot;BuildGuru&quot;</span> group=<span class="xml&#45;quote">&quot;buildmaster&quot;</span> address=<span class="xml&#45;quote">&quot;buildguru&#64;mycompany.com&quot;</span>/&gt;</span>&#10;           <span class="xml&#45;tag">&lt;user name=<span class="xml&#45;quote">&quot;JoeDeveloper&quot;</span> group=<span class="xml&#45;quote">&quot;developers&quot;</span> address=<span class="xml&#45;quote">&quot;foo&#64;bar.com&quot;</span>/&gt;</span>&#10;         <span class="xml&#45;tag">&lt;/users&gt;</span>&#10;         <span class="xml&#45;tag">&lt;groups&gt;</span>&#10;           <span class="xml&#45;tag">&lt;group name=<span class="xml&#45;quote">&quot;developers&quot;</span> notification=<span class="xml&#45;quote">&quot;change&quot;</span>/&gt;</span>&#10;           <span class="xml&#45;tag">&lt;group name=<span class="xml&#45;quote">&quot;buildmaster&quot;</span> notification=<span class="xml&#45;quote">&quot;always&quot;</span>/&gt;</span>&#10;         <span class="xml&#45;tag">&lt;/groups&gt;</span>&#10;       <span class="xml&#45;tag">&lt;/email&gt;</span>&#10;       <span class="xml&#45;tag">&lt;xmllogger&gt;</span>&#10;         <span class="xml&#45;tag">&lt;logDir&gt;</span>..&#92;website&#92;log<span class="xml&#45;tag">&lt;/logDir&gt;</span>&#10;       <span class="xml&#45;tag">&lt;/xmllogger&gt;</span>&#10;     <span class="xml&#45;tag">&lt;/publishers&gt;</span>&#10;   <span class="xml&#45;tag">&lt;/project&gt;</span>&#10; <span class="xml&#45;tag">&lt;/cruisecontrol&gt;</span></pre>
</div></div></p><h3 class="heading3"><a name="PVCSSourceControlBlock-cruise.build"> cruise.build</a></h3>
<div class="code"><div class="codeContent">
<pre><span class="xml&#45;tag">&lt;project name=<span class="xml&#45;quote">&quot;ccnetlaunch&quot;</span> default=<span class="xml&#45;quote">&quot;run&quot;</span>&gt;</span>&#10;   <span class="xml&#45;tag">&lt;target name=<span class="xml&#45;quote">&quot;run&quot;</span> depends=<span class="xml&#45;quote">&quot;update,build&quot;</span>/&gt;</span>&#10;   <span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; base.dir is the dir where cc will do its check outs and builds &#45;&#45;&gt;</span></span>&#10;   <span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; i.e. &lt;property name=<span class="xml&#45;quote">&quot;base.dir&quot;</span> value=<span class="xml&#45;quote">&quot;C:&#92;someDir&#92;cc&#45;code&quot;</span>/&gt;</span> &#45;&#45;&gt;</span>&#10;   <span class="xml&#45;tag">&lt;property name=<span class="xml&#45;quote">&quot;base.dir&quot;</span> value=<span class="xml&#45;quote">&quot;cc.net checkouts and build dir&quot;</span>/&gt;</span>&#10;   <span class="xml&#45;tag">&lt;target name=<span class="xml&#45;quote">&quot;update&quot;</span>&gt;</span>&#10;       <span class="xml&#45;tag">&lt;delete&gt;</span>&#10;         <span class="xml&#45;tag">&lt;fileset&gt;</span>&#10;             <span class="xml&#45;tag">&lt;includes name=<span class="xml&#45;quote">&quot;$&#123;base.dir&#125;&#42;&#42;&#42;&quot;</span> /&gt;</span>&#10;         <span class="xml&#45;tag">&lt;/fileset&gt;</span>&#10;       <span class="xml&#45;tag">&lt;/delete&gt;</span>&#10;     <span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; &lt;exec basedir=<span class="xml&#45;quote">&quot;$&#123;base.dir&#125;&quot;</span> program=<span class="xml&#45;quote">&quot;$&#123;pvcs.executable&#125;&quot;</span> commandline=&#039; get &#45;pr<span class="xml&#45;quote">&quot;our pvcs directory root&quot;</span> &#45;a$&#123;base.dir&#125; &#45;o &#45;z /&#039; /&gt;</span> &#45;&#45;&gt;</span>&#10;     <span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; pvcs.executable was set for us in the ccnet.config file &#45;&#45;&gt;</span></span>&#10;       <span class="xml&#45;tag">&lt;exec basedir=<span class="xml&#45;quote">&quot;$&#123;base.dir&#125;&quot;</span> program=<span class="xml&#45;quote">&quot;$&#123;pvcs.executable&#125;&quot;</span> commandline=&#039; get &#45;pr<span class="xml&#45;quote">&quot;C:&#92;somedir&#92;pvcsrepos&quot;</span> &#45;a$&#123;base.dir&#125; &#45;o &#45;z /&#039; /&gt;</span>&#10;   <span class="xml&#45;tag">&lt;/target&gt;</span>&#10;   <span class="xml&#45;tag">&lt;target name=<span class="xml&#45;quote">&quot;build&quot;</span>&gt;</span>&#10;     <span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; point to our project build file in our cc.net build directory &#45;&#45;&gt;</span></span>&#10;     <span class="xml&#45;tag"><span class="xml&#45;comment">&lt;&#33;&#45;&#45; &lt;nant buildfile=<span class="xml&#45;quote">&quot;$&#123;base.dir&#125;&#92;project1&#92;Payroll&#92;PayrollApp&#92;payroll.build&quot;</span> /&gt;</span> &#45;&#45;&gt;</span>&#10;     <span class="xml&#45;tag">&lt;nant buildfile=<span class="xml&#45;quote">&quot;$&#123;base.dir&#125;&#92;subproject name&#92;project build file&quot;</span> /&gt;</span>&#10;   <span class="xml&#45;tag">&lt;/target&gt;</span> &#10;<span class="xml&#45;tag">&lt;/project&gt;</span></pre>
</div></div>

				    
                    			    </td>
		    </tr>
	    </table>
	    <table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td height="12" background="border/border_bottom.gif"><img src="border/spacer.gif" width="1" height="1" border="0"/></td>
			</tr>
		    <tr>
			    <td align="center"><font color="grey">Copyright(c) 2004 ThoughtWorks, Inc. All Rights Reserved</font></td>
		    </tr>
	    </table>
    </body>
</html>
